<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Product Configurator</title>
    <link rel="stylesheet" href="TemplateData/style.css">
    <script id= "UnityProgress" src="TemplateData/UnityProgress.js"></script>
    <script src= "Build/UnityLoader.js"></script>
    <script>
        var gameInstance = UnityLoader.instantiate("gameContainer", "Build/LPPC.json", {onProgress: UnityProgress});

        var allowed;

        var lppcOnConfiguratorLoad = function() {
            console.log("Configurator is Loaded");
            window.addEventListener('paste', function(e){
                const str = e.clipboardData.getData('Text');
                if (allowed) {
                    gameInstance.SendMessage("LoadInputField", "PasteTextFromClipboard", str);
                    console.log("SENDING MESSAGE:..................." + str);
                }
            });
        }
        
        var lppcOnSpecificationClick = function(data) {
            console.log(data);
        }

        var lppcOnPasteAllowed = function(isAllowed) {
          allowed = isAllowed;
          console.log("ALLOWED?.................. " + allowed);
          console.log("isAllowed?........................... "+ isAllowed)
        }

        var lppcCopyToClipboard = function(code){
            var el = document.createElement('textarea');
            el.value = code;
            el.setAttribute('readonly', '');
            document.body.appendChild(el);
            el.select();
            document.execCommand("copy");
            document.body.removeChild(el);
        }

        var lppcShowLoading = function(showLoading) {
            var element = document.querySelector('#gameContainerOverlay');
            if (element) {
                element.parentElement.removeChild(element);
            }

            if (showLoading) {
                var container = document.querySelector('#gameContainer');
                var overlay = document.createElement('div');
                overlay.id = 'gameContainerOverlay'
                overlay.setAttribute('style', 'position:absolute; top:0; left:0; width:100%; height:100%; background-color:#000; opacity:0.4; color:#fff; display:flex; justify-content:center; align-items:center; font-family:sans-serif;')
                overlay.innerText = "Loading...";

                container.appendChild(overlay);
            }
        }

        var recaptureInputAndFocus = function() {
            var canvas = document.getElementById("#canvas");
            if (canvas) {
                canvas.setAttribute("tabindex", "1");
                canvas.focus(); 
            } else {
                setTimeout(recaptureInputAndFocus, 100);
            }
        }

        recaptureInputAndFocus();
</script>
</head>
<body>
<div class="webgl-content">
    <div id="gameContainer" style="width: 1280px; height: 720px"></div>
</div>
</body>
</html>

